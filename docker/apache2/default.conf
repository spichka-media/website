<VirtualHost *:80>
    ServerAdmin developer@localhost
    ServerName developer
    DocumentRoot /var/www/html
    ErrorLog ${APACHE_LOG_DIR}/error.log
    CustomLog ${APACHE_LOG_DIR}/access.log combined

    # Проксирование запросов к /bud/ в node контейнер для Hot Reload
    ProxyPreserveHost On
    ProxyPass /bud/ http://node:8000/bud/
    ProxyPassReverse /bud/ http://node:8000/bud/
    RewriteEngine On
    RewriteCond %{HTTP:Upgrade} =websocket [NC]
    RewriteRule /bud/(.*) ws://node:8000/bud/$1 [P,L]

    # Проксирование hot-update файлов
    ProxyPass /app/themes/sage/public/ http://localhost:80/wp-content/themes/spichka/public/
    ProxyPassReverse /app/themes/sage/public/ http://localhost:80/wp-content/themes/spichka/public/
</VirtualHost>
